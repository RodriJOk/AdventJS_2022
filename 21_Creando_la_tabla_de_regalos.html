<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reto 21 -> Creando la tabla de regalos</title>
</head>
<body>
    <script>
        // Hay muchas cartas de niños pidiendo regalos y es muy difícil que podamos hacer inventario 
        // de todos ellos. Por eso, hemos decidido crear un programa que nos dibuje una tabla con 
        // los regalos que nos piden y sus cantidades.

        // Para ello nos dan un array de objetos con los nombres de los regalos y sus cantidades. 
        // Escribe una función que reciba este array y devuelva una cadena con la tabla dibujada.

        // printTable([
        //   { name: 'Game', quantity: 2 },
        //   { name: 'Bike', quantity: 1 },
        //   { name: 'Book', quantity: 3 }
        // ])
        // +++++++++++++++++++
        // | Gift | Quantity |
        // | ---- | -------- |
        // | Game | 2        |
        // | Bike | 1        |
        // | Book | 3        |
        // *******************
        // Otro ejemplo donde se puede ver que la tabla siempre usa sólo el espacio justo dependiendo de 
        // la longitud de los nombres de los regalos y de las cantidades.

        // printTable([
        //   { name: 'PlayStation 5', quantity: 9234782374892 },
        //   { name: 'Book Learn Web Dev', quantity: 23531 }
        // ])
        // ++++++++++++++++++++++++++++++++++++++
        // | Gift               | Quantity      |
        // | ------------------ | ------------- |
        // | PlayStation 5      | 9234782374892 |
        // | Book Learn Web Dev | 23531         |
        // **************************************
        // Como ves, el tamaño de las celdas depende de la longitud de los nombres de los regalos y 
        // de las cantidades, aunque como mínimo tendrán que ser del espacio de los títulos Gift y Quantity 
        // respectivamente.

        // La tabla usa los símbolos: + para el borde superior, * para el borde inferior, 
        // - para las líneas horizontales y | para las líneas verticales.

        // Ten en cuenta:

        // Usa sólo el espacio que necesitas para dibujar la tabla.
        // Adapta la tabla a la longitud de los nombres de los regalos y de las cantidades o los 
        // títulos de las columnas.
        // No hace falta que ordenes los resultados.
        // La tabla no termina con salto de línea.

        function printTable(gifts) {
            let print_table = ""
            let nombres = [];
            let cantidades = [];
            let quantity = "Quantity"
            let cantidad = 0;
            Object.values(gifts).forEach(element =>{
                nombres.push(element.name);
                cantidades.push(element.quantity);
            })
            nombres.sort((a,b) => b.length - a.length);
            cantidades.sort((a,b) => b.toString().length - a.toString().length);
            let nombre_largo = nombres[0].length;
            let cantidad_larga = cantidades[0].toString().length;
            console.log("Soy la cantidad larga " + cantidad_larga)
            if(quantity.length > cantidad_larga){
                cantidad_larga = quantity.length;
            }
            if(nombre_largo < 4){
                nombre_largo = 4;
            }
            print_table += `++${'+'.repeat(nombre_largo)}+++${'+'.repeat(cantidad_larga)}++\n`;
            print_table += `| Gift${' '.repeat(nombre_largo - 3)}| Quantity${' '.repeat(cantidad_larga - 8)} |\n`;
            print_table += `| ${'-'.repeat(nombre_largo)} | ${'-'.repeat(cantidad_larga)} |\n`;
            console.log(cantidad_larga)
            console.log(cantidad_larga.length)
            Object.values(gifts).forEach(element =>{
                print_table += `| ${element.name}${' '.repeat(nombre_largo - element.name.length)} | ${element.quantity}${' '.repeat(cantidad_larga - element.quantity.toString().length)} |\n`;
            })
            print_table += `**${'*'.repeat(nombre_largo)}***${'*'.repeat(cantidad_larga)}**`;
            return print_table
        }

        console.log(printTable([
            { name: 'Game', quantity: 2 },
            { name: 'Bike', quantity: 1 },
            { name: 'Book', quantity: 3 }
        ]))
        console.log(printTable([
            { name: 'PlayStation 5', quantity: 9234782374892 },
            { name: 'Book Learn Web Dev', quantity: 23531 }
        ]))

        console.log(printTable([
            { name: 'Toy', quantity: 12 },
            { name: 'Mic', quantity: 123 }
        ]))

        console.log("+++++++++++++++++++\n| Gift | Quantity |\n| ---- | -------- |\n| Toy  | 12       |\n| Mic  | 123      |\n*******************")
    </script>
</body>
</html>